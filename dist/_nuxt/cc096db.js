(window.webpackJsonp=window.webpackJsonp||[]).push([[8,9,11],{327:function(e,t,n){"use strict";var r=n(3),o=n(6),l=n(68),c=n(228),d=n(227),f=n(5),m=RangeError,v=String,h=Math.floor,w=o(d),x=o("".slice),C=o(1..toFixed),_=function(e,t,n){return 0===t?n:t%2==1?_(e,t-1,n*e):_(e*e,t/2,n)},y=function(data,e,t){for(var n=-1,r=t;++n<6;)r+=e*data[n],data[n]=r%1e7,r=h(r/1e7)},A=function(data,e){for(var t=6,n=0;--t>=0;)n+=data[t],data[t]=h(n/e),n=n%e*1e7},T=function(data){for(var e=6,s="";--e>=0;)if(""!==s||0===e||0!==data[e]){var t=v(data[e]);s=""===s?t:s+w("0",7-t.length)+t}return s};r({target:"Number",proto:!0,forced:f((function(){return"0.000"!==C(8e-5,3)||"1"!==C(.9,0)||"1.25"!==C(1.255,2)||"1000000000000000128"!==C(0xde0b6b3a7640080,0)}))||!f((function(){C({})}))},{toFixed:function(e){var t,n,r,o,d=c(this),f=l(e),data=[0,0,0,0,0,0],h="",C="0";if(f<0||f>20)throw new m("Incorrect fraction digits");if(d!=d)return"NaN";if(d<=-1e21||d>=1e21)return v(d);if(d<0&&(h="-",d=-d),d>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(d*_(2,69,1))-69)<0?d*_(2,-t,1):d/_(2,t,1),n*=4503599627370496,(t=52-t)>0){for(y(data,0,n),r=f;r>=7;)y(data,1e7,0),r-=7;for(y(data,_(10,r,1),0),r=t-1;r>=23;)A(data,1<<23),r-=23;A(data,1<<r),y(data,1,1),A(data,2),C=T(data)}else y(data,0,n),y(data,1<<-t,0),C=T(data)+w("0",f);return C=f>0?h+((o=C.length)<=f?"0."+w("0",f-o)+C:x(C,0,o-f)+"."+x(C,o-f)):h+C}})},328:function(e,t,n){"use strict";n.r(t);n(327),n(226),n(81);var r={name:"QuestionTimer",props:{pause:{type:Boolean,default:!1},countDownTime:{type:Number,default:null}},data:function(){return{forcePause:!1,START_TIME:10,time:0,timer:null}},mounted:function(){this.startTimer()},computed:{isVisible:function(){return this.time>0},percentage:function(){var e;return 100*this.time/(null!==(e=this.remainingTime)&&void 0!==e?e:1)},percentageColor:function(){return this.percentage<=30?"bg-red-500":this.percentage<=50?"bg-orange-500":this.percentage<=80?"bg-yellow-500":"bg-blue-500"},remainingTime:function(){var e;return null!==(e=this.countDownTime)&&void 0!==e?e:this.START_TIME}},methods:{startTimer:function(){var e=this;console.log("startTimer"),this.time=this.remainingTime,clearInterval(this.timer),this.timer=setInterval((function(){e.state("pause")||e.pause||e.forcePause||(e.time-=.1,e.time<.2&&(clearInterval(e.timer),e.$emit("time-expired",e.time)))}),100)}}},o=n(67),component=Object(o.a)(r,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex gap-2 mt-3 items-center"},[t("span",{staticClass:"w-5 h-5 flex justify-center items-center",on:{click:function(t){return e.$emit("game-paused")}}},[t("ion-icon",{attrs:{name:"pause-outline",size:"large"}})],1),e._v(" "),t("div",{staticClass:"relative w-full"},[t("div",{staticClass:"h-3 p-0.5 w-full rounded-xl bg-gray-200"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.percentage>=3,expression:"percentage >= 3"}],staticClass:"z-10 h-full rounded-xl transition-all duration-300 ease-in-out",class:[e.percentageColor],style:"width:"+e.percentage+"%;"})])]),e._v(" "),t("span",{staticClass:"w-5 h-5 flex justify-center items-center font-semibold text-xl",on:{click:function(t){e.forcePause=!e.forcePause}}},[e._v("\n    "+e._s(e.time.toFixed(0))+"\n  ")])])}),[],!1,null,null,null);t.default=component.exports},330:function(e,t,n){"use strict";n.r(t);var r=n(123);var o=n(160),l=n(99);function c(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||Object(o.a)(e)||Object(l.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n(81);var d={name:"MiniQuizzQuestion",props:{isActive:{type:Boolean,default:!1},question:{type:Object,default:function(){return{}}}},data:function(){return{selectedAnswer:null,answers:[]}},created:function(){var e;this.answers=c(null===(e=this.question)||void 0===e?void 0:e.answers),this.shuffleArray(this.answers)},computed:{isCorrect:function(){var e;if(this.selectedAnswer)return!(null===(e=this.selectedAnswer)||void 0===e||!e.isCorrect)},feedBackColor:function(){if(null!=this.isCorrect)return 1==this.isCorrect?"green":"red"},feedBackText:function(){if(null!=this.isCorrect)return 1==this.isCorrect?"Correct":"Faux"}},methods:{feedbackButton:function(e){return e==this.selectedAnswer?0==this.isCorrect?"border-red-300 bg-red-100 hover:bg-red-200 text-red-700":1==this.isCorrect?"border-green-300 bg-green-100 hover:bg-green-200 text-green-700":"border-orange-300 bg-orange-100 hover:bg-orange-200 text-orange-700":this.selectedAnswer?"bg-gray-400 hover:bg-gray-400":""},selectAnswer:function(e){var t=this;this.isActive&&(this.selectedAnswer=e,setTimeout((function(){t.submitAnswer()}),100))},timeExpired:function(){console.log("time expired"),this.selectedAnswer={},this.submitAnswer()},submitAnswer:function(){this.$emit("answered",this.selectedAnswer)}}},f=n(67),component=Object(f.a)(d,(function(){var e,t,n=this,r=n._self._c;return r("article",{staticClass:"relative rounded-lg border shadow transform p-3 flex flex-col gap-3 w-64 bg-white"},[r("transition",{attrs:{name:"fade"}},[r("question-timer",{directives:[{name:"show",rawName:"v-show",value:n.isActive&&null==n.selectedAnswer,expression:"isActive && selectedAnswer == null"}],attrs:{pause:!n.isActive||null!=n.isCorrect},on:{"time-expired":n.timeExpired}})],1),n._v(" "),r("h4",[n._v(n._s(n.question.prompt))]),n._v(" "),r("div",{staticClass:"relative rounded bg-gray-600 p-2"},[r("img",{staticClass:"w-32 h-32 mx-auto",attrs:{src:null!==(e=null===(t=n.question)||void 0===t?void 0:t.image)&&void 0!==e?e:"/favicon.png",alt:""}}),n._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:null!=n.isCorrect,expression:"isCorrect != null"}],staticClass:"absolute top-0 left-0 w-full h-full"},[r("div",{staticClass:"absolute top-0 left-0 w-full h-full opacity-80 rounded",class:["bg-"+n.feedBackColor+"-500"]}),n._v(" "),r("div",{staticClass:"relative h-full flex flex-col items-center justify-center gap-3 text-white"},[r("span",{staticClass:"text-white flex justify-center items-center",class:["text-"+n.feedBackColor+"-500"]},[r("ion-icon",{staticStyle:{"font-size":"64px"},attrs:{name:n.isCorrect?"checkmark-outline":"close-outline"}})],1),n._v(" "),r("h4",{staticClass:"text-2xl font-semibold"},[n._v(n._s(n.feedBackText)+" !")])])])]),n._v(" "),r("ul",{staticClass:"flex flex-col gap-2"},n._l(n.answers,(function(e,i){return r("button",{key:i,staticClass:"border-2 hover:bg-gray-200 hover:shadow text-gray-700 w-full rounded border-gray-200 bg-gray-100 px-2 text-sm py-1 font-medium",class:[n.feedbackButton(e)],on:{click:function(t){return n.selectAnswer(e)}}},[n._v("\n      "+n._s(e.content)+"\n    ")])})),0)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{QuestionTimer:n(328).default})},342:function(e,t,n){"use strict";n.r(t);n(327),n(34),n(13),n(81);var r={name:"MiniQuizz",props:{startMiniQuizz:{type:Boolean,default:!1}},data:function(){return{MARK_TOTAL:20,score:0,gamePlaying:!0,showResults:!1,activeQuestionIndex:0,answers:[],questions:[{category_id:"signalisation",question:"De quel panneau s'agit-il ?",level:"",type:"image",image:"/signalisation/sens-giratoire-obligatoire.svg.png",answers:[{content:"Panneau Céder le passage"},{content:"Tourner à gauche"},{content:"Sens giratoire obligatoire",isCorrect:!0},{content:"Faire demi-tour"}]},{category_id:"signalisation",question:"De quel panneau s'agit-il ?",level:"",type:"image",image:"/signalisation/panneau-d-interdictionsens-interdit-a-tout-vehicule-b1.png",answers:[{content:"Arrêt et stationnement interdits"},{content:"Sens Interdit",isCorrect:!0},{content:"Interdit de passer"},{content:"Interdit de circuler"}]},{category_id:"signalisation",question:"De quel panneau s'agit-il ?",level:"",type:"image",image:"/signalisation/panneau-indication-circulation-a-sens-unique-c12.png",answers:[{content:"Continuer tout droit"},{content:"Circuler sur la voie du milieu"},{content:"Direction autoroute"},{content:"Circulation sens unique",isCorrect:!0}]},{category_id:"signalisation",question:"De quel panneau s'agit-il ?",level:"",type:"image",image:"/signalisation/panneau-indication-du-caractere-prioritaire-d-une-route-ab6.jpg",answers:[{content:"Indique des travaux sur la voie"},{content:"Indique une route prioritaire",isCorrect:!0},{content:"Indique un pont mobile"},{content:"Indique un céder le passage"}]}]}},mounted:function(){var e=this;document.addEventListener("wheel",(function(){setTimeout((function(){e.gamePlaying=e.checkVisible("#mini_quizz")}),300)}))},computed:{currentQuestion:function(){return this.questions[this.activeQuestionIndex]}},methods:{checkVisible:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;t=t||0,n=n||"visible";var rect=document.querySelector(e).getBoundingClientRect(),r=Math.max(document.documentElement.clientHeight,window.innerHeight),o=rect.bottom-t<0,l=rect.top-r+t>=0;return"above"===n?o:"below"===n?l:!o&&!l},calcScore:function(){var e,t=100*this.answers.filter((function(e){return!!e})).length/(null!==(e=this.questions.length)&&void 0!==e?e:0),n=100/this.MARK_TOTAL;this.score=t/n,this.score==this.MARK_TOTAL&&this.throwConfetti()},throwConfetti:function(){var e=this;setTimeout((function(){e.$confetti.start(),setTimeout((function(){e.$confetti.stop()}),2e3)}),500)},isActiveQuestion:function(e){return this.activeQuestionIndex==e},isAnswerCorrect:function(e){return this.answers[e]},endGame:function(){this.gamePlaying=!1,this.showResults=!0,this.calcScore()},nextQuestion:function(){if(this.activeQuestionIndex<this.questions.length-1){this.activeQuestionIndex++;try{var e="mini_quizz_question_"+this.activeQuestionIndex;document.getElementById(e).scrollIntoView()}catch(e){}}else this.endGame()},submitAnswer:function(){},validateAnswer:function(e){var t=this;this.answers[this.activeQuestionIndex]=!(null==e||!e.isCorrect),setTimeout((function(){t.nextQuestion()}),1e3)}}},o=r,l=n(67),component=Object(l.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-col",attrs:{id:"mini_quizz"}},[t("div",{staticClass:"flex flex-col md:flex-row items-start relative justify-center gap-3 mt-10"},e._l(e.questions,(function(n,i){return t("mini-quizz-question",{key:i,staticClass:"pt-5 md:pt-0",style:"opacity:"+(1-.25*(i-e.activeQuestionIndex))+";",attrs:{isActive:e.isActiveQuestion(i)&&e.gamePlaying,question:n,id:"mini_quizz_question_"+i},on:{answered:e.validateAnswer}})})),1),e._v(" "),t("transition",{attrs:{name:"slide-down"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showResults,expression:"showResults"}],staticClass:"flex flex-col items-center gap-2 mt-3"},[t("div",{staticClass:"text-center mt-5"},[t("h3",{staticClass:"text-3xl font-semibold"},[e._v("Votre score")]),e._v(" "),t("div",{staticClass:"rounded-full text-6xl mt-3 font-bold flex justify-center items-center w-24 h-24 mx-auto animated-pulse text-black",class:{"bg-green-500":e.score==e.MARK_TOTAL,"bg-blue-500":e.score<e.MARK_TOTAL,"bg-orange-500":e.score<=e.MARK_TOTAL/2,"bg-red-500":e.score<=e.MARK_TOTAL/3},attrs:{id:"score-container"}},[e._v("\n          "+e._s(e.score.toFixed(0))+"/"+e._s(e.MARK_TOTAL)+"\n        ")]),e._v(" "),t("h5",[e._v("Téléchargez l'application pour plus de quizz")])]),e._v(" "),t("div",{staticClass:"flex justify-center gap-3 text-white"},[t("button",{staticClass:"rounded bg-black px-2 py-1"},[e._v("Apple Store")]),e._v(" "),t("button",{staticClass:"rounded bg-black px-2 py-1"},[e._v("Play Store")])])])])],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{MiniQuizzQuestion:n(330).default})}}]);